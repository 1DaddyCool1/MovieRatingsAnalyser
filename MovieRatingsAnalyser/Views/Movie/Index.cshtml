@model List<MovieRatingsAnalyser.Models.Movie>

<h2>Movies</h2>

<h4>Top 5 Highest-Rated Movies</h4>
<ul>
    @if (ViewBag.TopRatedMovies != null)
    {
        var topMovies = (List<MovieRatingsAnalyser.Models.Movie>)ViewBag.TopRatedMovies;
        if (topMovies.Count > 0)
        {
            foreach (var m in topMovies)
            {
                <li>@m.Title (@m.Rating)</li>
            }
        }
        else
        {
            <li>No top-rated movies found.</li>
        }
    }
    else
    {
        <li>No top-rated movies found.</li>
    }
</ul>

<h4>Worst 5 Movies</h4>
<ul>
    @if (ViewBag.WorstRatedMovies != null)
    {
        var worstMovies = (List<MovieRatingsAnalyser.Models.Movie>)ViewBag.WorstRatedMovies;
        if (worstMovies.Count > 0)
        {
            foreach (var m in worstMovies)
            {
                <li>@m.Title (@m.Rating)</li>
            }
        }
        else
        {
            <li>No worst-rated movies found.</li>
        }
    }
    else
    {
        <li>No worst-rated movies found.</li>
    }
</ul>

<h4>Best Year: @(ViewBag.BestYear != null ? ViewBag.BestYear : 0)</h4>

<h4>Average Rating: @(ViewBag.AverageRating != null ? ViewBag.AverageRating : 0)</h4>

<h4>All Movies</h4>
<table border="1" cellpadding="5">
    <tr>
        <th>Title</th>
        <th>Genre</th>
        <th>Rating</th>
        <th>Year</th>
        <th>Source</th>
        <th>ReviewDate</th>
        <th>Actions</th>
    </tr>
    @if (Model != null)
    {
        if (Model.Count > 0)
        {
            foreach (var m in Model)
            {
                <tr>
                    <td>@m.Title</td>
                    <td>@m.Genre</td>
                    <td>@m.Rating</td>
                    <td>@m.Year</td>
                    <td>@m.Source</td>
                    <td>@m.ReviewDate.ToShortDateString()</td>
                    <td>
                        <form asp-action="DeleteMovie" method="post" style="display:inline;">
                            <input type="hidden" name="id" value="@m.Id" />
                            <button type="submit">Delete</button>
                        </form>
                        <form asp-action="EditMovie" method="get" style="display:inline;">
                            <input type="hidden" name="id" value="@m.Id" />
                            <button type="submit">Edit</button>
                        </form>
                    </td>
                </tr>
            }
        }
        else
        {
            <tr><td colspan="7">No movies found.</td></tr>
        }
    }
    else
    {
        <tr><td colspan="7">No movies found.</td></tr>
    }
</table>

<h4>Add New Movie</h4>

<form asp-action="AddMovie" method="post">
    <label>Title:</label>
    <input name="Title" required /><br />
    <label>Genre:</label>
    <input name="Genre" /><br />
    <label>Rating:</label>
    <input name="Rating" type="number" min="0" max="10" required /><br />
    <label>Source:</label>
    <input name="Source" /><br />
    <label>Year:</label>
    <input name="Year" type="number" required /><br />
    <label>ReviewDate:</label>
    <input name="ReviewDate" type="date" /><br />

    <button type="submit">Add Movie</button>
</form>


